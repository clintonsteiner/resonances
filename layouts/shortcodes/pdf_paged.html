<div id="pdf-container-{{ .Get "id" }}" style="display: flex; flex-direction: column; align-items: center; gap: 10px; max-width: {{ .Get "width" | default "90%" }}; margin: 0 auto; overflow: hidden;">
    <!-- PDF Viewer -->
    <div style="position: relative; width: 100%; height: {{ .Get "height" | default "800px" }}; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); overflow: hidden;">
        <iframe 
            id="pdf-frame-{{ .Get "id" }}" 
            src="{{ .Get "src" }}#page={{ .Get "page" | default "1" }}" 
            width="100%" 
            height="100%" 
            style="border: none; display: block;">
        </iframe>
    </div>

    <!-- Navigation Buttons -->
    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 10px;">
        <button 
            id="prev-page-{{ .Get "id" }}" 
            style="padding: 10px 20px; font-size: 16px; cursor: pointer; border: 1px solid #ccc; border-radius: 4px; background-color: #f0f0f0; color: #333; font-weight: bold;">
            Previous Page
        </button>
        <span 
            id="page-info-{{ .Get "id" }}" 
            style="font-size: 16px; color: #333; font-weight: bold;">
            Page 1
        </span>
        <button 
            id="next-page-{{ .Get "id" }}" 
            style="padding: 10px 20px; font-size: 16px; cursor: pointer; border: 1px solid #ccc; border-radius: 4px; background-color: #f0f0f0; color: #333; font-weight: bold;">
            Next Page
        </button>
    </div>
</div>

<script>
    // Dynamically fetch total pages and handle page navigation
    async function setupPdfNavigation(pdfUrl, containerId) {
        const iframe = document.getElementById(`pdf-frame-${containerId}`);
        const prevButton = document.getElementById(`prev-page-${containerId}`);
        const nextButton = document.getElementById(`next-page-${containerId}`);
        const pageInfo = document.getElementById(`page-info-${containerId}`);
        let currentPage = 1;
        let totalPages = 1;

        if (typeof pdfjsLib === 'undefined') {
            const script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js';
            document.head.appendChild(script);
            await new Promise(resolve => script.onload = resolve);
        }

        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
        const pdf = await pdfjsLib.getDocument(pdfUrl).promise;
        totalPages = pdf.numPages;

        // Update page info
        function updatePage() {
            iframe.src = `${pdfUrl}#page=${currentPage}`;
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            prevButton.disabled = currentPage === 1;
            nextButton.disabled = currentPage === totalPages;
        }

        // Button handlers
        prevButton.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                updatePage();
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentPage < totalPages) {
                currentPage++;
                updatePage();
            }
        });

        // Initialize
        updatePage();
    }

    // Initialize the PDF navigation for the given URL
    setupPdfNavigation("{{ .Get "src" }}", "{{ .Get "id" }}");
</script>

